import{j as e}from"./animations-UknLjuBE.js";import{r as d}from"./vendor-BaVwoRKI.js";import{u as f}from"./index-D-2lJErN.js";import"./ui-DGvCF7HF.js";import"./router-DQlhDhXb.js";const W=()=>{const{isInstallable:r,isInstalled:n,isUpdateAvailable:a,needsUpdate:l,isOnline:o,showInstallPrompt:x,updateApp:p,dismissUpdate:b}=f(),[c,g]=d.useState([]),[h,u]=d.useState(null),t=s=>{const i=new Date().toLocaleTimeString();g(N=>[`[${i}] ${s}`,...N.slice(0,19)])},m=async()=>{if("serviceWorker"in navigator)try{const s=await navigator.serviceWorker.getRegistration();if(s){const i={active:!!s.active,installing:!!s.installing,waiting:!!s.waiting,scope:s.scope,updateViaCache:s.updateViaCache};u(i),t(`Service Worker Status: ${JSON.stringify(i)}`)}else t("No service worker registration found")}catch(s){t(`Error checking service worker: ${s}`)}else t("Service workers not supported")},v=async()=>{if("serviceWorker"in navigator)try{const s=await navigator.serviceWorker.getRegistration();s&&(t("Forcing service worker update check..."),await s.update(),t("Update check completed"))}catch(s){t(`Update check failed: ${s}`)}},j=()=>{t("Simulating offline mode..."),window.location.href="/non-existent-page-to-trigger-offline"};return d.useEffect(()=>{t("PWA Test Page loaded"),m()},[]),d.useEffect(()=>{t(`PWA State Update - Installable: ${r}, Installed: ${n}, Update Available: ${a}, Needs Update: ${l}, Online: ${o}`)},[r,n,a,l,o]),e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"PWA Testing Dashboard"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Installation Status"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Installable: ",e.jsx("span",{className:r?"text-green-600":"text-red-600",children:r?"Yes":"No"})]}),e.jsxs("div",{children:["Installed: ",e.jsx("span",{className:n?"text-green-600":"text-red-600",children:n?"Yes":"No"})]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Update Status"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Update Available: ",e.jsx("span",{className:a?"text-orange-600":"text-green-600",children:a?"Yes":"No"})]}),e.jsxs("div",{children:["Needs Update: ",e.jsx("span",{className:l?"text-orange-600":"text-green-600",children:l?"Yes":"No"})]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Connection Status"}),e.jsx("div",{className:"space-y-1 text-sm",children:e.jsxs("div",{children:["Online: ",e.jsx("span",{className:o?"text-green-600":"text-red-600",children:o?"Yes":"No"})]})})]})]}),h&&e.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm mb-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Service Worker Info"}),e.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded overflow-x-auto",children:JSON.stringify(h,null,2)})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("button",{onClick:x,disabled:!r,className:"bg-blue-500 text-white px-4 py-2 rounded disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-blue-600 transition-colors",children:"Install App"}),e.jsx("button",{onClick:p,disabled:!a&&!l,className:"bg-green-500 text-white px-4 py-2 rounded disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-green-600 transition-colors",children:"Update App"}),e.jsx("button",{onClick:v,className:"bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600 transition-colors",children:"Check Updates"}),e.jsx("button",{onClick:j,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition-colors",children:"Test Offline"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsx("button",{onClick:m,className:"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 transition-colors",children:"Check SW Status"}),e.jsx("button",{onClick:b,disabled:!a,className:"bg-gray-500 text-white px-4 py-2 rounded disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-gray-600 transition-colors",children:"Dismiss Update"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Activity Logs"}),e.jsx("button",{onClick:()=>g([]),className:"text-sm bg-gray-200 px-3 py-1 rounded hover:bg-gray-300 transition-colors",children:"Clear Logs"})]}),e.jsx("div",{className:"bg-gray-50 p-3 rounded max-h-64 overflow-y-auto",children:c.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No logs yet..."}):e.jsx("div",{className:"space-y-1",children:c.map((s,i)=>e.jsx("div",{className:"text-xs font-mono text-gray-700",children:s},i))})})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 mt-6",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Testing Instructions"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:'• Use "Check Updates" to manually trigger update detection'}),e.jsx("li",{children:"• Deploy a new version and wait for update notification to appear"}),e.jsx("li",{children:'• Use "Test Offline" to see the themed offline page'}),e.jsx("li",{children:"• Install the app to test PWA functionality"}),e.jsx("li",{children:"• Monitor the logs for detailed PWA activity"})]})]})]})})};export{W as default};
