import{R as $,r as o,u as N,j as n,A as z,a as I,m as v}from"./index-BeBZI8rV.js";import{X as L}from"./badge-Dg20mtyD.js";const P=$.memo(({src:a,alt:f,className:h=""})=>{const[s,p]=o.useState(!1),[x,y]=o.useState({x:0,y:0}),[i,k]=o.useState(!0),g=o.useRef(null),d=N(),l=o.useRef(null),c=o.useRef(null),r=o.useCallback(()=>{var e;p(!1),(e=l.current)==null||e.focus()},[]),b=o.useCallback(()=>{i||p(e=>!e)},[i]),w=o.useCallback(e=>{e.key==="Escape"&&s?r():(e.key==="Enter"||e.key===" ")&&!i&&(e.preventDefault(),b())},[s,i,r,b]),j=o.useCallback(e=>{if(!l.current||!g.current||!s)return;const{left:u,top:t,width:m,height:C}=l.current.getBoundingClientRect(),E=(e.clientX-u)/m*100,R=(e.clientY-t)/C*100;y({x:E,y:R})},[s]);return o.useEffect(()=>{const e=t=>{l.current&&!l.current.contains(t.target)&&r()},u=t=>{t.key==="Escape"?r():t.key==="Tab"&&(c.current&&document.activeElement===c.current?t.preventDefault():c.current&&(c.current.focus(),t.preventDefault()))};if(s){document.addEventListener("mousedown",e),document.addEventListener("keydown",u);const t=setTimeout(()=>{var m;(m=c.current)==null||m.focus()},100);return()=>{clearTimeout(t),document.removeEventListener("mousedown",e),document.removeEventListener("keydown",u)}}},[s,r]),n.jsxs("div",{ref:l,className:`relative overflow-hidden ${i?"cursor-wait":"cursor-zoom-in"} ${h} focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-primary focus-visible:ring-offset-2 focus-visible:ring-offset-background rounded-lg`,onClick:b,onMouseMove:j,onKeyDown:w,role:"button",tabIndex:0,"aria-label":`${s?"Close":"Zoom"} image: ${f}`,children:[i&&n.jsxs("div",{className:"absolute inset-0 flex items-center justify-center bg-accent-bg dark:bg-slate-800 rounded-lg",children:[" ",n.jsx("div",{className:"w-8 h-8 border-4 border-brand-primary border-t-transparent rounded-full animate-spin"})," "]}),n.jsx("img",{ref:g,src:a,alt:f,className:`w-full h-full object-cover transition-transform duration-300 ${s?"scale-150":"hover:scale-105"} ${i?"opacity-0":"opacity-100"}`,srcSet:(()=>{if(!a)return;const e=a.substring(0,a.lastIndexOf(".")),u=a.substring(a.lastIndexOf("."));return[480,800,1200,1600].map(t=>`${e}-${t}w${u} ${t}w`).join(", ")})(),sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 70vw, 800px",style:s?{transformOrigin:`${x.x}% ${x.y}%`}:{},onLoad:()=>k(!1),loading:"lazy"}),n.jsx(z,{children:s&&typeof document<"u"&&I.createPortal(n.jsxs(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:d?{duration:0}:{duration:.3},className:"fixed inset-0 bg-black/95 z-[10000] flex items-center justify-center p-4 backdrop-blur-sm",onClick:r,role:"dialog","aria-modal":"true","aria-label":"Zoomed image view",children:[n.jsx(v.img,{initial:{scale:d?1:.5},animate:{scale:1},exit:{scale:d?1:.5},transition:d?{duration:0}:{duration:.3},src:a,alt:f,className:"max-w-full max-h-full object-contain shadow-2xl",onClick:e=>e.stopPropagation(),style:{maxWidth:"95vw",maxHeight:"95vh"}}),n.jsx("button",{ref:c,className:"absolute top-4 right-4 z-[10001] text-white bg-black/50 rounded-full p-3 hover:bg-black/70 focus:outline-none focus:ring-2 focus:ring-white/50 transition-colors backdrop-blur-sm",onClick:r,"aria-label":"Close zoomed view (Press Escape)",title:"Close zoomed view (Press Escape)",children:n.jsx(L,{className:"w-6 h-6"})}),n.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white text-sm bg-black/50 px-4 py-2 rounded-full backdrop-blur-sm",children:"Click outside or press Escape to close"})]}),document.body)})]})});P.displayName="ZoomableImage";export{P as Z};
//# sourceMappingURL=ZoomableImage-1uqMZCpk.js.map
